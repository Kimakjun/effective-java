## Future_Simple_Usage

### future 단순 활용

future 는 비동기 계산을 모델링하는데 사용 할 수 있다. 시간이 걸릴 수 있는 작업을 Future 내부로 설정하면 호출자 스레드가 결과를 기다리는 동안 다른 유용한 작업을 수행 할 수 있다.

```
Future future = executor.submit("오래걸리는 작업")
doSomething("다른 작업")

result = future.get(1, Timeout.SECONDS) // 비동기 작업의 결과를 가져 온다 결과가 준비되지 않았다면 호출 스레드가 블록된다 다만 최대 1초까지만 기다린다.

```

다만 위 코드는 문제가 있다. 만약 Future 작업이 끝나지 않는다면 오랫동안 블록되는 문제가 발생하게된다.
그렇기 때문에 "future.get(1, Timeout.SECONDS)" 과 같이 get 메서드를 오버로드해서 스레드가 대기할 최대 타임아웃 시간을 결정해야한다.

### Future 의 제한

Future 는 여려 결과가 있을때 의존성을 표현하기 어렵다.
예를 들어 아래와 같은 경우이다.

```
A 계산 결과 => B 계산으로 전달 => B 결과를 다른 질의 결과와 조합
```

만약 아래와 같은 선언형 기능이 있다면 위 작업을 잘 처리할 수 있다.

- 두개의 비동기 계산 결과를 하나로 합친다. 두 계산 결과는 독립적이거나 의존적일 수도 있다.
- Future 집합이 실행하는 모든 태스크의 완료를 기다린다.
- 프로그램적으로 Future 를 완료 시킨다. 비동기 동작에 수동으로 결과를 제공한다.
- Future 완료동작에 반응한다.

위와 같은 기능을 선언형으로 이용할 수 있도록 자바8 에서 제공하는 것이 CompletableFuture 이다. CompletableFuture 는 람다 표현식과 파이프라이닝을 활용한다.
